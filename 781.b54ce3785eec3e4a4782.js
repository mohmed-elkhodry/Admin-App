"use strict";(self.webpackChunkmy_work_zone=self.webpackChunkmy_work_zone||[]).push([[781],{781:(D,U,i)=>{i.r(U),i.d(U,{UsersModule:()=>B});var c=i(2057),T=i(9514),n=i(3738),u=i(6733),l=i(6782),A=i(9765),e=i(793),a=i(8809),p=i(3013),f=i(7965),g=i(7745),Z=i(7921),h=i(4207),y=i(3928),b=i(6352),C=i(5301),q=i(9529);function _(t,o){1&t&&(e.TgZ(0,"small",33),e._uU(1,"Name is required"),e.qZA())}function J(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"Email is Required"),e.qZA())}function z(t,o){1&t&&(e.TgZ(0,"span"),e._uU(1,"Enter A valid Email"),e.qZA())}function F(t,o){if(1&t&&(e.TgZ(0,"small",33),e.YNc(1,J,2,0,"span",34),e.YNc(2,z,2,0,"span",34),e.qZA()),2&t){const s=e.oxw();e.xp6(1),e.Q6J("ngIf",(null==s.form.controls.email.errors?null:s.form.controls.email.errors.required)&&s.isSubmitted),e.xp6(1),e.Q6J("ngIf",(null==s.form.controls.email.errors?null:s.form.controls.email.errors.email)&&s.isSubmitted)}}function Y(t,o){1&t&&(e.TgZ(0,"small",33),e._uU(1,"Password is required"),e.qZA())}function L(t,o){1&t&&(e.TgZ(0,"small",35),e._uU(1,"Phone is required"),e.qZA())}function Q(t,o){1&t&&(e.TgZ(0,"small",33),e._uU(1,"is Admin is required"),e.qZA())}function w(t,o){1&t&&(e.TgZ(0,"small",35),e._uU(1,"Country is required"),e.qZA())}let S=(()=>{class t{constructor(s,r,m,v,N){this.userser=s,this.formBulider=r,this.active=m,this.messageService=v,this.router=N,this.editMode=!1,this.isSubmitted=!1,this.countries=[],this.endSubs=new A.xQ}ngOnDestroy(){this.endSubs.next(),this.endSubs.complete()}ngOnInit(){this.getCountries(),this.form=this.formBulider.group({name:["",n.kI.required],email:["",[n.kI.required,n.kI.email]],password:["",n.kI.required],phone:["",n.kI.required],isAdmin:[!1,n.kI.required],street:[""],apartment:[""],city:[""],zip:[""],country:["",n.kI.required]}),this.checkEditMode()}getCountries(){u.registerLocale(i(1086)),this.countries=Object.entries(u.getNames("en",{select:"official"})).map(s=>({id:s[0],name:s[1]}))}checkEditMode(){this.active.params.pipe((0,l.R)(this.endSubs)).subscribe(s=>{s.id&&(this.editMode=!0,this.currentId=s.id,this.userser.getuser(this.currentId).pipe((0,l.R)(this.endSubs)).subscribe(r=>{this.form.controls.name.setValue(r.name),this.form.controls.email.setValue(r.email),this.form.controls.phone.setValue(r.phone),this.form.controls.isAdmin.setValue(r.isAdmin),this.form.controls.street.setValue(r.street),this.form.controls.apartment.setValue(r.apartment),this.form.controls.city.setValue(r.name),this.form.controls.zip.setValue(r.zip),this.form.controls.country.setValue(r.country),this.form.controls.password.setValidators([]),this.form.controls.password.updateValueAndValidity()}))})}submit(){if(this.isSubmitted=!0,!this.form.invalid){const s={id:this.currentId,name:this.form.controls.name.value,email:this.form.controls.email.value,password:this.form.controls.password.value,phone:this.form.controls.phone.value,isAdmin:this.form.controls.isAdmin.value,apartment:this.form.controls.apartment.value,street:this.form.controls.street.value,city:this.form.controls.city.value,zip:this.form.controls.zip.value,country:this.form.controls.country.value};this.editMode?this.userser.editUser(this.currentId,s).pipe((0,l.R)(this.endSubs)).subscribe(r=>{this.messageService.add({severity:"success",summary:"Success",detail:`User ${r.name} Edited Successfully`}),setTimeout(()=>{this.router.navigate(["/users"])},1500)},()=>{this.messageService.add({severity:"error",summary:"Error",detail:"User Cannot be Edited"})}):this.userser.addUser(s).pipe((0,l.R)(this.endSubs)).subscribe(r=>{this.messageService.add({severity:"success",summary:"Success",detail:`User ${r.name} Added Successfully`}),setTimeout(()=>{this.router.navigate(["/users"])},1500)},()=>{this.messageService.add({severity:"error",summary:"Error",detail:"User Cannot be Added"})})}}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(T.f),e.Y36(n.qu),e.Y36(a.gz),e.Y36(p.ez),e.Y36(a.F0))},t.\u0275cmp=e.Xpm({type:t,selectors:[["admin-users-form"]],decls:63,vars:12,consts:[[1,"user-container"],[3,"header"],[1,"grid","mb-2"],[1,"col-12"],[1,"p-toolbar-group-left"],[1,"p-toolbar-group-right"],["styleClass","p-button-primary mr-2","icon","pi pi-plus",3,"label","click"],["styleClass","p-button-secondary","label","Cancel","icon","pi pi-times","routerLink","/users"],[3,"formGroup"],[1,"formgrid","grid"],[1,"field","col"],["for","name"],["id","name","type","text","pInputText","","formControlName","name",1,"w-full"],["class","p-error",4,"ngIf"],["for","email"],["id","email","type","text","pInputText","","formControlName","email",1,"w-full"],["for","password"],["id","password","type","password","pInputText","","formControlName","password",1,"w-full"],["for","phone",1,"block"],["id","phone","mask","(999) 999-9999","formControlNamephone","","placeholder","(999) 999-9999","formControlName","phone"],["class","p-error block",4,"ngIf"],["for","isAdmin",1,"block"],["formControlName","isAdmin","inputId","isAdmin"],["for","street"],["id","street","type","text","pInputText","","formControlName","street",1,"w-full"],["for","appart"],["id","appart","type","text","pInputText","","formControlName","apartment",1,"w-full"],["for","city"],["id","city","type","text","pInputText","","formControlName","city",1,"w-full"],["for","zip"],["id","zip","type","text","pInputText","","formControlName","zip",1,"w-full"],["for","country",1,"block"],["id","country","formControlName","country","optionLabel","name","optionValue","id","filterBy","name","placeholder","Select a Country",3,"options","filter","showClear"],[1,"p-error"],[4,"ngIf"],[1,"p-error","block"]],template:function(s,r){1&s&&(e._UZ(0,"p-toast"),e.TgZ(1,"div",0),e.TgZ(2,"p-card",1),e.TgZ(3,"div",2),e.TgZ(4,"div",3),e.TgZ(5,"p-toolbar"),e._UZ(6,"div",4),e.TgZ(7,"div",5),e.TgZ(8,"p-button",6),e.NdJ("click",function(){return r.submit()}),e.qZA(),e._UZ(9,"p-button",7),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.TgZ(10,"form",8),e.TgZ(11,"div",9),e.TgZ(12,"div",10),e.TgZ(13,"label",11),e._uU(14,"Name"),e.qZA(),e._UZ(15,"input",12),e.YNc(16,_,2,0,"small",13),e.qZA(),e.TgZ(17,"div",10),e.TgZ(18,"label",14),e._uU(19,"Email"),e.qZA(),e._UZ(20,"input",15),e.YNc(21,F,3,2,"small",13),e.qZA(),e.TgZ(22,"div",10),e.TgZ(23,"label",16),e._uU(24,"Password"),e.qZA(),e._UZ(25,"input",17),e.YNc(26,Y,2,0,"small",13),e.qZA(),e.qZA(),e.TgZ(27,"div",9),e.TgZ(28,"div",10),e.TgZ(29,"label",18),e._uU(30,"Phone"),e.qZA(),e._UZ(31,"p-inputMask",19),e.YNc(32,L,2,0,"small",20),e.qZA(),e.TgZ(33,"div",10),e.TgZ(34,"label",21),e._uU(35,"Is Admin"),e.qZA(),e._UZ(36,"p-inputSwitch",22),e.YNc(37,Q,2,0,"small",13),e.qZA(),e._UZ(38,"div",10),e.qZA(),e.TgZ(39,"div",9),e.TgZ(40,"div",10),e.TgZ(41,"label",23),e._uU(42,"Street"),e.qZA(),e._UZ(43,"input",24),e.qZA(),e.TgZ(44,"div",10),e.TgZ(45,"label",25),e._uU(46,"apartment"),e.qZA(),e._UZ(47,"input",26),e.qZA(),e.TgZ(48,"div",10),e.TgZ(49,"label",27),e._uU(50,"city"),e.qZA(),e._UZ(51,"input",28),e.qZA(),e.qZA(),e.TgZ(52,"div",9),e.TgZ(53,"div",10),e.TgZ(54,"label",29),e._uU(55,"zip"),e.qZA(),e._UZ(56,"input",30),e.qZA(),e.TgZ(57,"div",10),e.TgZ(58,"label",31),e._uU(59,"Country"),e.qZA(),e._UZ(60,"p-dropdown",32),e.YNc(61,w,2,0,"small",20),e.qZA(),e._UZ(62,"div",10),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(2),e.MGl("header","",r.editMode?"Edit":"Add"," User"),e.xp6(6),e.s9C("label",r.editMode?"Update":"Create"),e.xp6(2),e.Q6J("formGroup",r.form),e.xp6(6),e.Q6J("ngIf",r.form.controls.name.invalid&&r.isSubmitted),e.xp6(5),e.Q6J("ngIf",r.form.controls.email.invalid&&r.isSubmitted),e.xp6(5),e.Q6J("ngIf",r.form.controls.email.invalid&&r.isSubmitted),e.xp6(6),e.Q6J("ngIf",r.form.controls.phone.invalid&&r.isSubmitted),e.xp6(5),e.Q6J("ngIf",r.form.controls.isAdmin.invalid&&r.isSubmitted),e.xp6(23),e.Q6J("options",r.countries)("filter",!0)("showClear",!0),e.xp6(1),e.Q6J("ngIf",r.form.controls.country.invalid&&r.isSubmitted))},directives:[f.FN,g.Z,Z.o,h.zx,a.rH,n._Y,n.JL,n.sg,n.Fj,y.o,n.JJ,n.u,c.O5,b.vy,C.Ql,q.Lt],styles:[""]}),t})();var x=i(3473),d=i(3380),I=i(3771);function M(t,o){1&t&&(e.TgZ(0,"tr"),e.TgZ(1,"th",10),e._uU(2," Name"),e._UZ(3,"p-sortIcon",11),e.qZA(),e.TgZ(4,"th"),e._uU(5,"Email"),e.qZA(),e.TgZ(6,"th"),e._uU(7,"Is Admin"),e.qZA(),e.TgZ(8,"th"),e._uU(9,"Country"),e.qZA(),e._UZ(10,"th"),e.qZA())}function V(t,o){1&t&&e._UZ(0,"p-tag",16),2&t&&e.Q6J("rounded",!0)}function E(t,o){1&t&&e._UZ(0,"p-tag",17),2&t&&e.Q6J("rounded",!0)}const k=function(t){return["edit-user",t]};function O(t,o){if(1&t){const s=e.EpF();e.TgZ(0,"tr"),e.TgZ(1,"td"),e._uU(2),e.qZA(),e.TgZ(3,"td"),e._uU(4),e.qZA(),e.TgZ(5,"td"),e.YNc(6,V,1,1,"p-tag",12),e.YNc(7,E,1,1,"p-tag",13),e.qZA(),e.TgZ(8,"td"),e._uU(9),e.qZA(),e.TgZ(10,"td"),e.TgZ(11,"p-button",14),e.NdJ("click",function(){const v=e.CHM(s).$implicit;return e.oxw().deletUser(v.id)}),e.qZA(),e._UZ(12,"p-button",15),e.qZA(),e.qZA()}if(2&t){const s=o.$implicit,r=e.oxw();e.xp6(2),e.Oqu(s.name),e.xp6(2),e.Oqu(s.email),e.xp6(2),e.Q6J("ngIf",s.isAdmin),e.xp6(1),e.Q6J("ngIf",!s.isAdmin),e.xp6(2),e.Oqu(r.getCountryName(s.country)),e.xp6(3),e.Q6J("routerLink",e.VKq(6,k,s.id))}}const R=[{path:"",component:(()=>{class t{constructor(s,r,m){this.userSer=s,this.messageService=r,this.confirmationService=m,this.users=[],this.endSubs=new A.xQ}ngOnDestroy(){this.endSubs.next(),this.endSubs.complete()}ngOnInit(){this.getUsers()}getUsers(){this.userSer.getusers().pipe((0,l.R)(this.endSubs)).subscribe(s=>this.users=s)}deletUser(s){this.confirmationService.confirm({message:"Are you sure that you want to Delete this Product?",accept:()=>{this.userSer.deletuser(s).pipe((0,l.R)(this.endSubs)).subscribe(()=>{this.messageService.add({severity:"success",summary:"Success",detail:"User Deleted Successfully"}),this.userSer.getusers().pipe((0,l.R)(this.endSubs)).subscribe(r=>this.users=r)},()=>{this.messageService.add({severity:"error",summary:"Error",detail:"User Cannot Deleted"})})}})}getCountryName(s){return u.registerLocale(i(1086)),u.getName(s,"en",{select:"official"})}}return t.\u0275fac=function(s){return new(s||t)(e.Y36(T.f),e.Y36(p.ez),e.Y36(p.YP))},t.\u0275cmp=e.Xpm({type:t,selectors:[["admin-users-list"]],decls:13,vars:1,consts:[["header","Confirmation","icon","pi pi-exclamation-triangle"],[1,"users-container"],["header","Users","subheader","List Of All Users"],[1,"grid"],[1,"col-12"],[1,"p-toolbar-group-left"],["label","New","icon","pi pi-plus","routerLink","add-user"],["responsiveLayout","scroll","styleClass","p-datatable-gridlines",3,"value"],["pTemplate","header"],["pTemplate","body"],["pSortableColumn","name"],["field","name"],["severity","success","icon","pi pi-check",3,"rounded",4,"ngIf"],["severity","danger","icon","pi pi-times",3,"rounded",4,"ngIf"],["styleClass","p-button-danger mr-2","icon","pi pi-trash",3,"click"],["styleClass","p-button-error","icon","pi pi-pencil",3,"routerLink"],["severity","success","icon","pi pi-check",3,"rounded"],["severity","danger","icon","pi pi-times",3,"rounded"]],template:function(s,r){1&s&&(e._UZ(0,"p-toast"),e._UZ(1,"p-confirmDialog",0),e.TgZ(2,"div",1),e.TgZ(3,"p-card",2),e.TgZ(4,"div",3),e.TgZ(5,"div",4),e.TgZ(6,"p-toolbar"),e.TgZ(7,"div",5),e._UZ(8,"p-button",6),e.qZA(),e.qZA(),e.qZA(),e.TgZ(9,"div",4),e.TgZ(10,"p-table",7),e.YNc(11,M,11,0,"ng-template",8),e.YNc(12,O,13,8,"ng-template",9),e.qZA(),e.qZA(),e.qZA(),e.qZA(),e.qZA()),2&s&&(e.xp6(10),e.Q6J("value",r.users))},directives:[f.FN,x.Q,g.Z,Z.o,h.zx,a.rH,d.iA,p.jx,d.lQ,d.fz,c.O5,I.V],styles:[""]}),t})()},{path:"add-user",component:S},{path:"edit-user/:id",component:S}];let j=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[a.Bz.forChild(R)],a.Bz]}),t})(),B=(()=>{class t{}return t.\u0275fac=function(s){return new(s||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[[c.ez,f.EV,x.D,g.d,Z.V,h.hJ,d.U$,j,I.W,n.u5,n.UX,y.j,C.Iu,q.kW,b.zz]]}),t})()}}]);